{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Composition",
    "description": "File format that defines a collection of tunings to be used in a musical composition. The player is expected to switch between the tuning while playing the composition.",
    "type": "object",
    "properties": {
        "metadata": { "$ref": "compositionMetadata.schema.json" },
        "intonationStandard": { "$ref": "intonationStandard.schema.json" },
        "tuningReference": { "$ref": "tuningReference.schema.json" },
        "baseUri": {
            "type": "string",
            "title": "Base URI",
            "description": "Custom base URI to be used for all internal URIs in this file.",
            "format": "uri-reference"
        },
        "definitions": {},
        "tunings": {
            "type": "array",
            "title": "Tunings",
            "description": "An array of tuning specifications, where each one allows a scale to be mapped to a keyboard tuning.",
            "items": { "$ref": "tuningMapper.schema.json" }
        },
        "defaultFill": {
            "allOf": [
                {
                    "title": "Default Fill",
                    "description": "Fallback tuning to be used for unused keyboard keys.\nIf this fallback itself, does not define tuning values for some unused keys, then, the standard 12-EDO tuning values are used for those keys (values with a deviation of 0 cents). If the defaultFill is not provided, unused keys will use the standard 12-EDO tuning."
                },
                { "$ref": "tuningSpec.schema.json" }
            ]
        },
        "tuningReducer": {},
        "settings": {
            "type": "object",
            "properties": {
                "tuningMapper": {
                    "type": "object",
                    "properties": {
                        "manual": { "$ref": "tuningMapper.schema.json#/$defs/manualSettings" },
                        "auto": { "$ref": "tuningMapper.schema.json#/$defs/autoSettings" }
                    }
                }
            }
        }
    },
    "required": ["tuningReference", "tunings"]
}
